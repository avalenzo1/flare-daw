"use strict";const e=require("electron"),o=require("path");process.env.ROOT=o.join(__dirname,"..");process.env.DIST=o.join(process.env.ROOT,"dist-electron");process.env.VITE_PUBLIC=process.env.VITE_DEV_SERVER_URL?o.join(process.env.ROOT,"public"):o.join(process.env.ROOT,".output/public");process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";let t;const r=o.join(process.env.DIST,"preload.js");function i(){t=new e.BrowserWindow({webPreferences:{preload:r,nodeIntegrationInWorker:!0,contextIsolation:!1,nodeIntegration:!0,webSecurity:!1}}),t.webContents.setWindowOpenHandler(({url:n})=>(e.shell.openExternal(n),{action:"deny"})),e.ipcMain.on("show-context-menu",n=>{const s=[{label:"Menu Item 1",click:()=>{n.sender.send("context-menu-command","menu-item-1")}},{type:"separator"},{label:"Menu Item 2",type:"checkbox",checked:!0}];e.Menu.buildFromTemplate(s).popup({window:e.BrowserWindow.fromWebContents(n.sender)})}),process.env.VITE_DEV_SERVER_URL?(t.loadURL(process.env.VITE_DEV_SERVER_URL),t.webContents.openDevTools()):t.loadFile(o.join(process.env.VITE_PUBLIC,"index.html")),e.ipcMain.handle("open-project",async n=>(console.log(n),await e.dialog.showOpenDialog({properties:["openFile","multiSelections"],filters:[{name:"JavaScript Object Notation",extensions:["json"]}]}))),e.ipcMain.handle("save-project",async n=>await e.dialog.showSaveDialog({})),e.ipcMain.handle("open-directory",async n=>await e.dialog.showOpenDialog({properties:["openDirectory"]}))}e.app.whenReady().then(i);
